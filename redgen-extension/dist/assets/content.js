const g=()=>{var e,r;try{const t=document.querySelector('[class*="ArtworkInfo_titleContainer"]'),n=t==null?void 0:t.querySelector('span[class*="styles_display3"]'),u=((e=n==null?void 0:n.textContent)==null?void 0:e.trim())||"",o=t==null?void 0:t.querySelector('span[class*="styles_body"]'),a=((r=o==null?void 0:o.textContent)==null?void 0:r.trim())||"",s=document.querySelector('[data-testid="all-product-tags"]'),l=s==null?void 0:s.querySelectorAll("a"),c=[];l==null||l.forEach(h=>{var b;const y=(b=h.textContent)==null?void 0:b.trim();y&&c.push(y)});const d=[...new Set(c)].join(", "),i=document.querySelector('[class*="ArtworkInfo_imageContainer"]'),p=i==null?void 0:i.querySelector("img"),x=(p==null?void 0:p.src)||"";return{title:u,description:a,tags:d,imagePreview:x}}catch(t){return console.error("RedGen Scraper Error:",t),{title:"",description:"",tags:"",imagePreview:""}}},w=e=>{const r=(o,a)=>{var d,i;const s=(d=Object.getOwnPropertyDescriptor(o,"value"))==null?void 0:d.set,l=Object.getPrototypeOf(o),c=(i=Object.getOwnPropertyDescriptor(l,"value"))==null?void 0:i.set;c&&s!==c?c.call(o,a):s?s.call(o,a):o.value=a,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})),o.dispatchEvent(new Event("blur",{bubbles:!0}))},t=document.querySelector("#work_title_en"),n=document.querySelector("#work_tag_field_en"),u=document.querySelector("#work_description_en");t&&(t.focus(),r(t,e.title)),n&&(n.focus(),r(n,e.tags)),u&&(u.focus(),r(u,e.description))};console.log("ðŸ”´ RedGen Bridge Connected");chrome.runtime.onMessage.addListener((e,r,t)=>{if(e.type==="SCRAPE_PAGE"){const n=g();t({success:!0,data:n})}return e.type==="FILL_FORM"&&(w(e.payload),t({success:!0})),!0});const m=()=>{if(!window.location.pathname.includes("/i/")||document.getElementById("redgen-overlay-btn"))return;const e=document.createElement("button");e.id="redgen-overlay-btn",e.innerText="âž• Add to RedGen",Object.assign(e.style,{position:"fixed",bottom:"20px",right:"20px",zIndex:"9999",backgroundColor:"#ef4444",color:"white",padding:"10px 20px",borderRadius:"50px",border:"none",fontWeight:"bold",cursor:"pointer",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",fontSize:"14px",transition:"transform 0.2s"}),e.onmouseover=()=>e.style.transform="scale(1.05)",e.onmouseout=()=>e.style.transform="scale(1)",e.onclick=()=>{const r=g();chrome.runtime.sendMessage({type:"ADD_LISTING_FROM_OVERLAY",payload:r});const t=e.innerText;e.innerText="âœ… Added!",e.style.backgroundColor="#10b981",setTimeout(()=>{e.innerText=t,e.style.backgroundColor="#ef4444"},2e3)},document.body.appendChild(e)};m();let f=location.href;new MutationObserver(()=>{const e=location.href;e!==f&&(f=e,m())}).observe(document,{subtree:!0,childList:!0});
